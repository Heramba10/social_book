<!DOCTYPE html>
<html>
<head>
	<!-- Basic Page Info -->
	<meta charset="utf-8">
	<title>Social Book | Home</title>

	<!-- Site favicon -->
	<link rel="apple-touch-icon" sizes="180x180" href="static/images/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="static/images/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="static/images/favicon-16x16.png">

	<!-- Mobile Specific Metas -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- Google Font -->
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
	<!-- CSS -->
	<link rel="stylesheet" type="text/css" href="static/styles/core.css">
	<link rel="stylesheet" type="text/css" href="static/styles/icon-font.min.css">
	<link rel="stylesheet" type="text/css" href="static/src/plugins/datatables/css/dataTables.bootstrap4.min.css">
	<link rel="stylesheet" type="text/css" href="static/src/plugins/datatables/css/responsive.bootstrap4.min.css">
	<link rel="stylesheet" type="text/css" href="static/styles/style.css">

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-119386393-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-119386393-1');
	</script>
</head>
<body>
	<!-- <div class="pre-loader">
		<div class="pre-loader-box">
			<div class="loader-logo"><img src="vendors/images/deskapp-logo.svg" alt=""></div>
			<div class='loader-progress' id="progress_div">
				<div class='bar' id='bar1'></div>
			</div>
			<div class='percent' id='percent1'>0%</div>
			<div class="loading-text">
				Loading...
			</div>
		</div>
	</div> -->

	<div class="header">
		<div class="header-left">
			
			<div class="search-toggle-icon dw dw-search2" data-toggle="header_search"></div>
			<div class="header-search">
				<form>
					<div class="form-group mb-0">
						<div class="weight-600 font-30 text-blue"><span>Social Book</span></div>
						
					</div>
				</form>
			</div>
		</div>
		<div class="header-right">
			<!--<div class="dashboard-setting user-notification">
				<a href="{% url 'profile' %}">Profile</a>
			</div>
		 <div class="user-info">
            {% if user.is_authenticated %}
                <span>Welcome, {{ user.username }}!</span>
                <a href="/logout" class="btn btn-danger center">Logout</a> 
            {% else %}
                <span>Welcome, Guest!</span>
            {% endif %}
        </div>
		
	
		</div>-->
		<div class="user-info-dropdown">
				<div class="dropdown">
					<a class="dropdown-toggle" href="#" role="button" data-toggle="dropdown">
						
						<span class="user-name">Welcome,  {{ user.username }}!</span>
					</a>
					<div class="dropdown-menu dropdown-menu-right dropdown-menu-icon-list">
						<a class="dropdown-item" href="{% url 'profile' %}"><i class="dw dw-user1"></i> Profile</a>
						<a class="dropdown-item" href="{% url 'logout' %}"><i class="dw dw-logout"></i> Log Out</a>
					</div>
				</div>
			</div>
	</div>
</div>



	<div class="main-container">
		<div class="pd-ltr-20">
			<div class="card-box pd-20 height-100-p mb-30">
				<div class="row align-items-center">
					<div class="col-md-4">
						<img src="static/images/banner-img.png" alt="">
					</div>
					<div class="col-md-8">
						<h4 class="font-20 weight-500 mb-10 text-capitalize">
							Welcome back <div class="weight-600 font-30 text-blue"><span>{{ user.username }}!</span></div>
						</h4>
						<p class="font-18 max-width-600">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde hic non repellendus debitis iure, doloremque assumenda. Autem modi, corrupti, nobis ea iure fugiat, veniam non quaerat mollitia animi error corporis.</p>
					</div>
				</div>
			</div>
		
			<div class="row">
				<div class="col-xl-12 mb-30">
					<div class="card-box height-100-p pd-20">
						 <a class="btn btn-primary center" style="margin-top: 0px;margin-left: 998px;" href="/authors_sellers">
							Authors and Sellers</a>
						<h2 class="h2 mb-20 text-center col-xl-12 text-blue">Books Dashboard</h2>
					
			           
						
						
													   
   <div class="upload-box bg-white box-shadow border-radius-10">
    <div class="wizard-content">
        <form class="tab-wizard2" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
            <h5 class="text-center mt-2">Upload Book</h5>
            <section style="width: 100%; max-width: 600px; margin: 0 auto; padding: 20px;">
                <div class="form-wrap max-width-600 mx-auto">
                    <div class="form-group row">
                        <label class="col-sm-4 col-form-label">Title*</label>
                        <div class="col-sm-8">
                            {{ form.title }}
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-4 col-form-label">Description</label>
                        <div class="col-sm-8">
                            {{ form.description }}
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-4 col-form-label">Visibility</label>
                        <div class="col-sm-8">
                            {{ form.visibility }}
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-4 col-form-label">Cost</label>
                        <div class="col-sm-8">
                            {{ form.cost }}
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-4 col-form-label">Year of Publication</label>
                        <div class="col-sm-8">
                            {{ form.year_of_publication }}
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-4 col-form-label">Uploaded File</label>
                        <div class="col-sm-8">
                            {{ form.uploaded_file }}
                        </div>
                    </div>
                </div>
            
            <div class="text-center">
                <button type="submit" class="btn btn-primary">Upload</button>
            </div>
        </form>
    </div>
</div>

		<h2 class="h2 mb-20 text-center col-xl-12 text-blue" style="margin-top: 70px;">My Books</h2>
				
 <div style="text-align: center;">
        <a class="btn btn-primary mb-20"  onclick="checkUploadedBooks()" href="/my_books">View Books</a>
    </div>

						<!--<a class="btn btn-primary center" href="/upload_books">Upload Books</a>-->
						</div>
					</div>
				</div>
			
			</div>

			
			

	
			
			<div class="footer-wrap pd-20 mb-20 card-box">
				Social-Book<a href="https://github.com/dropways" target="_blank"></a>
			</div>
		</div>
	</div>
	<!-- js -->
	<script src="static/scripts/core.js"></script>
	<script src="static/scripts/script.min.js"></script>
	<script src="static/scripts/process.js"></script>
	<script src="static/scripts/layout-settings.js"></script>
	<script src="static/src/plugins/apexcharts/apexcharts.min.js"></script>
	<script src="static/src/plugins/datatables/js/jquery.dataTables.min.js"></script>
	<script src="static/src/plugins/datatables/js/dataTables.bootstrap4.min.js"></script>
	<script src="static/src/plugins/datatables/js/dataTables.responsive.min.js"></script>
	<script src="static/src/plugins/datatables/js/responsive.bootstrap4.min.js"></script>
	<script src="static/scripts/dashboard.js"></script>

<script>
    function checkUploadedBooks() {
        // Fetch data from the API
        fetch('/api/my-files/') // Replace with your actual API endpoint
            .then(response => response.json()) // Parse the JSON response
            .then(data => {
                // Check if the 'files' array is empty
                if (data.files.length === 0) {
                    // Show the alert
                    alert("No books uploaded.");
                    
                    // Redirect to the index page after the alert
                    setTimeout(function () {
                        window.location.href = '/index'; // Redirect to the home page
                    }, 500); // Wait for 500ms before redirecting
                } else {
                    // If files are present, redirect to the "my_books" page
                    window.location.href = '/my_books';
                }
            })
            .catch(error => {
                console.error('Error fetching uploaded files:', error);
            });
    }
</script>


</body>
</html>